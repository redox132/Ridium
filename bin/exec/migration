#!/usr/bin/env php
<?php

function make_migration(string $name): void
{
    $timestamp = date('Ymd_His');
    $filename = $timestamp . '_' . strtolower($name) . '.php';

    $stubPath = __DIR__ . '/../stubs/migration.stub';
    $targetPath = __DIR__ . '/../../app/database/migrations/' . $filename;

    if (!file_exists($stubPath)) {
        echo "Stub file not found at: $stubPath\n";
        exit(1);
    }

    copy($stubPath, $targetPath);

    echo "Migration created: migrations/$filename\n";
}

$argv = $_SERVER['argv'];

if (!isset($argv[1])) {
    echo "Usage: php bin/rida/make/migration <MigrationName>\n";
    exit(1);
}

